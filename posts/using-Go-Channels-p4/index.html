<!DOCTYPE html> <html lang="en" > <head> <meta charset="utf-8"> <!-- Begin Jekyll SEO tag v2.8.0 --> <title>Using Go Channels - Part 4 - Image Processing with Channels | g14a</title> <meta name="generator" content="Jekyll v4.3.3" /> <meta property="og:title" content="Using Go Channels - Part 4 - Image Processing with Channels" /> <meta name="author" content="g14a" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="A Tiny Recap" /> <meta property="og:description" content="A Tiny Recap" /> <link rel="canonical" href="https://g14a.github.io/posts/using-Go-Channels-p4/" /> <meta property="og:url" content="https://g14a.github.io/posts/using-Go-Channels-p4/" /> <meta property="og:site_name" content="g14a" /> <meta property="og:type" content="article" /> <meta property="article:published_time" content="2021-04-15T18:30:00+05:30" /> <meta name="twitter:card" content="summary" /> <meta property="twitter:title" content="Using Go Channels - Part 4 - Image Processing with Channels" /> <meta name="google-site-verification" content="google_meta_tag_verification" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"g14a"},"dateModified":"2024-09-11T16:36:56+05:30","datePublished":"2021-04-15T18:30:00+05:30","description":"A Tiny Recap","headline":"Using Go Channels - Part 4 - Image Processing with Channels","mainEntityOfPage":{"@type":"WebPage","@id":"https://g14a.github.io/posts/using-Go-Channels-p4/"},"url":"https://g14a.github.io/posts/using-Go-Channels-p4/"}</script> <!-- End Jekyll SEO tag --> </head> <!-- The Head v2.0 https://github.com/cotes2020/jekyll-theme-chirpy ¬© 2017-2019 Cotes Chung MIT License --> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta name="theme" content="Chirpy v2.7.2"> <meta name="google-site-verification" content="Uq5Ws_S7HFCjNgyIIOGXi76bInqos1mAvxiCrJspc8U" /> <!-- Begin Jekyll SEO tag v2.8.0 --> <title>Using Go Channels - Part 4 - Image Processing with Channels | g14a</title> <meta name="generator" content="Jekyll v4.3.3" /> <meta property="og:title" content="Using Go Channels - Part 4 - Image Processing with Channels" /> <meta name="author" content="g14a" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="A Tiny Recap" /> <meta property="og:description" content="A Tiny Recap" /> <link rel="canonical" href="https://g14a.github.io/posts/using-Go-Channels-p4/" /> <meta property="og:url" content="https://g14a.github.io/posts/using-Go-Channels-p4/" /> <meta property="og:site_name" content="g14a" /> <meta property="og:type" content="article" /> <meta property="article:published_time" content="2021-04-15T18:30:00+05:30" /> <meta name="twitter:card" content="summary" /> <meta property="twitter:title" content="Using Go Channels - Part 4 - Image Processing with Channels" /> <meta name="google-site-verification" content="google_meta_tag_verification" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"g14a"},"dateModified":"2024-09-11T16:36:56+05:30","datePublished":"2021-04-15T18:30:00+05:30","description":"A Tiny Recap","headline":"Using Go Channels - Part 4 - Image Processing with Channels","mainEntityOfPage":{"@type":"WebPage","@id":"https://g14a.github.io/posts/using-Go-Channels-p4/"},"url":"https://g14a.github.io/posts/using-Go-Channels-p4/"}</script> <!-- End Jekyll SEO tag --> <title>Using Go Channels - Part 4 - Image Processing with Channels | g14a </title> <!-- The Favicons for Web, Android, Microsoft, and iOS (iPhone and iPad) Apps Generated by: https://www.favicon-generator.org/ v2.0 https://github.com/cotes2020/jekyll-theme-chirpy ¬© 2019 Cotes Chung Published under the MIT license --> <link rel="shortcut icon" href="/assets/img/favicons/favicon.ico" type="image/x-icon"> <link rel="icon" href="/assets/img/favicons/favicon.ico" type="image/x-icon"> <link rel="apple-touch-icon" href="/assets/img/favicons/apple-icon.png"> <link rel="apple-touch-icon" href="/assets/img/favicons/apple-icon-precomposed.png"> <link rel="apple-touch-icon" sizes="57x57" href="/assets/img/favicons/apple-icon-57x57.png"> <link rel="apple-touch-icon" sizes="60x60" href="/assets/img/favicons/apple-icon-60x60.png"> <link rel="apple-touch-icon" sizes="72x72" href="/assets/img/favicons/apple-icon-72x72.png"> <link rel="apple-touch-icon" sizes="76x76" href="/assets/img/favicons/apple-icon-76x76.png"> <link rel="apple-touch-icon" sizes="114x114" href="/assets/img/favicons/apple-icon-114x114.png"> <link rel="apple-touch-icon" sizes="120x120" href="/assets/img/favicons/apple-icon-120x120.png"> <link rel="apple-touch-icon" sizes="144x144" href="/assets/img/favicons/apple-icon-144x144.png"> <link rel="apple-touch-icon" sizes="152x152" href="/assets/img/favicons/apple-icon-152x152.png"> <link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-icon-180x180.png"> <link rel="icon" type="image/png" sizes="192x192" href="/assets/img/favicons/android-icon-192x192.png"> <link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"> <link rel="icon" type="image/png" sizes="96x96" href="/assets/img/favicons/favicon-96x96.png"> <link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"> <link rel="manifest" href="/assets/img/favicons/manifest.json"> <meta name='msapplication-config' content='/assets/img/favicons/browserconfig.xml'> <meta name="msapplication-TileColor" content="#ffffff"> <meta name="msapplication-TileImage" content="/assets/img/favicons/ms-icon-144x144.png"> <meta name="theme-color" content="#ffffff"> <!-- Google Fonts --> <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"> <link rel="dns-prefetch" href="https://fonts.gstatic.com"> <!-- GA --> <link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"> <link rel="dns-prefetch" href="https://www.google-analytics.com"> <link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"> <link rel="dns-prefetch" href="https://www.googletagmanager.com"> <!-- jsDelivr CDN --> <link rel="preconnect" href="cdn.jsdelivr.net"> <link rel="dns-prefetch" href="cdn.jsdelivr.net"> <!-- Bootstrap --> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" integrity="sha256-LA89z+k9fjgMKQ/kq4OO2Mrf8VltYml/VES+Rg0fh20=" crossorigin="anonymous"> <!-- Font Awesome --> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css" integrity="sha256-+N4/V/SbAFiW1MPBCXnfnP9QSN3+Keu+NlB+0ev/YKQ=" crossorigin="anonymous"> <!-- CSS selector for site. Chirpy v2.3 https://github.com/cotes2020/jekyll-theme-chirpy ¬© 2020 Cotes Chung MIT Licensed --> <link rel="preload" href="/assets/css/post.css" as="style"> <link rel="stylesheet" href="/assets/css/post.css"> <link rel="preload" as="style" href="/assets/css/lib/bootstrap-toc.min.css"> <link rel="stylesheet" href="/assets/css/lib/bootstrap-toc.min.css" /> <!-- JavaScripts --> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script defer src="https://cdn.jsdelivr.net/combine/npm/popper.js@1.15.0,npm/bootstrap@4/dist/js/bootstrap.min.js"></script> <!-- JS selector for site. Chirpy v2.3 https://github.com/cotes2020/jekyll-theme-chirpy ¬© 2020 Cotes Chung MIT Licensed --> <script async src="/assets/js/post.min.js"></script> <!-- PWA --> <script defer src="/app.js"></script> <!-- GA --> <!-- The GA snippet v2.0 https://github.com/cotes2020/jekyll-theme-chirpy ¬© 2017-2019 Cotes Chung MIT License --> <!-- Global site tag (gtag.js) - Google Analytics --> <script defer src="https://www.googletagmanager.com/gtag/js?id=G-5XJNKPTFP0"></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'G-5XJNKPTFP0'); }); </script> </head> <body data-spy="scroll" data-target="#toc"> <!-- The Side Bar v2.0 https://github.com/cotes2020/jekyll-theme-chirpy ¬© 2017-2019 Cotes Chung MIT License --> <div id="sidebar" class="d-flex flex-column align-items-end"> <div class="profile-wrapper text-center"> <div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> <img src="/assets/img/sample/avatar.jpg" alt="avatar" onerror="this.style.display='none'"> </a> </div> <div class="site-title mt-3"> <a href="/">g14a</a> </div> <div class="site-subtitle font-italic">Thoughts and Knowledge.</div> </div><!-- .profile-wrapper --> <ul class="w-100"> <!-- home --> <li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a> </li> <!-- the real tabs --> <li class="nav-item"> <a href="/tabs/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a> </li> <!-- .nav-item --> <li class="nav-item"> <a href="/tabs/opensource/" class="nav-link"> <i class="fa-fw fas fa-info ml-xl-3 mr-xl-3 unloaded"></i> <span>OPEN SOURCE</span> </a> </li> <!-- .nav-item --> <li class="nav-item"> <a href="/tabs/projects/" class="nav-link"> <i class="fa-fw fas fa-info ml-xl-3 mr-xl-3 unloaded"></i> <span>PROJECTS</span> </a> </li> <!-- .nav-item --> <li class="nav-item"> <a href="/tabs/tags/" class="nav-link"> <i class="fa-fw fas fa-tags ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a> </li> <!-- .nav-item --> <li class="nav-item"> <a href="/tabs/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a> </li> <!-- .nav-item --> <li class="nav-item"> <a href="/tabs/about/" class="nav-link"> <i class="fa-fw fas fa-info ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT ME</span> </a> </li> <!-- .nav-item --> </ul> <!-- ul.nav.flex-column --> <div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center"> <a href="https://github.com/g14a" aria-label="github" class="order-3" target="_blank" rel="noopener"> <i class="fab fa-github-alt"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['gowtham.m81197','gmail.com'].join('@')" aria-label="email" class="order-4" > <i class="fas fa-envelope"></i> </a> <a href="https://www.linkedin.com/in/gowtham-munukutla/" aria-label="linkedin" class="order-5" target="_blank" rel="noopener"> <i class="fab fa-linkedin"></i> </a> <span class="icon-border order-2"></span> <span id="mode-toggle-wrapper" class="order-1"> <!-- Switch the mode between dark and light. v2.1 https://github.com/cotes2020/jekyll-theme-chirpy ¬© 2020 Cotes Chung MIT License --> <i class="mode-toggle fas fa-adjust"></i> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } var self = this; /* always follow the system prefers */ this.sysDarkPrefers.addListener(function() { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.updateMermaid(); }); } /* constructor() */ setDark() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_KEY); sessionStorage.removeItem(ModeToggle.MODE_KEY); } get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode == ModeToggle.DARK_MODE; } get isLightMode() { return this.mode == ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer) ) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } updateMermaid() { if (typeof mermaid !== "undefined") { let expectedTheme = (this.modeStatus === ModeToggle.DARK_MODE? "dark" : "default"); let config = { theme: expectedTheme }; /* re-render the SVG ‚Ä∫ <https://github.com/mermaid-js/mermaid/issues/311#issuecomment-332557344> */ $(".mermaid").each(function() { let svgCode = $(this).prev().children().html(); $(this).removeAttr("data-processed"); $(this).html(svgCode); }); mermaid.initialize(config); mermaid.init(undefined, ".mermaid"); } } flipMode() { if (this.hasMode) { if (this.isSysDarkPrefer) { if (this.isLightMode) { this.clearMode(); } else { this.setLight(); } } else { if (this.isDarkMode) { this.clearMode(); } else { this.setDark(); } } } else { if (this.isSysDarkPrefer) { this.setLight(); } else { this.setDark(); } } this.updateMermaid(); } /* flipMode() */ } /* ModeToggle */ let toggle = new ModeToggle(); $(".mode-toggle").click(function() { toggle.flipMode(); }); </script> </span> </div> <!-- .sidebar-bottom --> </div><!-- #sidebar --> <!-- The Top Bar v2.0 https://github.com/cotes2020/jekyll-theme-chirpy ¬© 2017-2019 Cotes Chung MIT License --> <div id="topbar-wrapper" class="row justify-content-center topbar-down"> <div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Posts </a> </span> <span>Using Go Channels - Part 4 - Image Processing with Channels</span> </span><!-- endof #breadcrumb --> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i> <div id="topbar-title"> Post </div> <i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" placeholder="Search..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span> <span id="search-cancel" >Cancel</span> </div> </div> <div id="main-wrapper"> <div id="main"> <!-- Refactor the HTML structure. --> <!-- In order to allow a wide table to scroll horizontally, we suround the markdown table with `<div class="table-wrapper">` and `</div>` --> <!-- Fixed kramdown code highlight rendering: https://github.com/penibelst/jekyll-compress-html/issues/101 https://github.com/penibelst/jekyll-compress-html/issues/71#issuecomment-188144901 --> <!-- Add attribute 'hide-bullet' to the checkbox list --> <!-- return --> <div class="row"> <div id="post-wrapper" class="col-12 col-lg-11 col-xl-8"> <div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"> <h1 data-toc-skip>Using Go Channels - Part 4 - Image Processing with Channels</h1> <div class="post-meta text-muted d-flex flex-column"> <!-- Published date and author --> <div> <!-- Date format snippet v2.4.1 https://github.com/cotes2020/jekyll-theme-chirpy ¬© 2020 Cotes Chung MIT License --> <span class="timeago " data-toggle="tooltip" data-placement="bottom" title="Thu, Apr 15, 2021, 6:30 PM +0530" > Apr 15, 2021 <i class="unloaded">2021-04-15T18:30:00+05:30</i> </span> by <span class="author"> g14a </span> </div> <div> <!-- lastmod --> <span> Updated <!-- Date format snippet v2.4.1 https://github.com/cotes2020/jekyll-theme-chirpy ¬© 2020 Cotes Chung MIT License --> <span class="timeago lastmod" data-toggle="tooltip" data-placement="bottom" title="Wed, Sep 11, 2024, 4:36 PM +0530" > Sep 11 <i class="unloaded">2024-09-11T16:36:56+05:30</i> </span> </span> <!-- read time --> <!-- Calculate the post's reading time, and display the word count in tooltip --> <!-- return element --> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="1366 words">7 min</span> <!-- page views --> </div> </div> <!-- .post-meta --> <div class="post-content"> <!-- Using lozad. See: <https://github.com/ApoorvSaxena/lozad.js#usage> --> <h2 id="a-tiny-recap"><strong>A Tiny Recap</strong></h2> <p>In the earlier section <a href="https://g14a.github.io/posts/using-Go-Channels-p3/">Part - 3</a> , we have learnt:</p> <ul> <li>What read and write specific channels are</li> <li>How we use select in the context of goroutines</li> <li>Finally, how we apply timeouts in select</li> </ul> <p>In this section, we apply whatever we have learnt about channels until now and perform a real world task.</p> <h2 id="exercise"><strong>Exercise</strong></h2> <p>In this exercise we do a little image manipulation using the following Go library</p> <p><a href="https://github.com/anthonynsimon/bild">Bild - Image processing algorithms in pure Go </a></p> <p>to manipulate our images. We take a large dataset of images of size 3k, and apply changes to each image and save them in a different directory. The task is simple, however implementing it is where we are going to be at.</p> <p>Find the dataset here - <a href="https://datasets.cvc.uab.es/rrc/DocVQA/train.tar.gz">Image Dataset</a>. It contains 10k images but we‚Äôre going to work on the first 3k for the scope of this tutorial. You can always extend the program to process all of them and explore the concurrency.</p> <p>The flow of manipulation is going to be like the following:</p> <ul> <li>Read an image</li> <li>Change the brightness of it.</li> <li>Change the contrast of it.</li> <li>Save the result in a new file.</li> </ul> <h2 id="image-type"><strong>Image Type</strong></h2> <p>We create our custom Image:</p> <div class="language-go highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre></td><td class="rouge-code"><pre><span class="k">type</span> <span class="n">Image</span> <span class="k">struct</span> <span class="p">{</span>
    <span class="n">InputPath</span>  <span class="kt">string</span>
    <span class="n">OutputPath</span> <span class="kt">string</span>
    <span class="n">Img</span>        <span class="n">image</span><span class="o">.</span><span class="n">Image</span>
    <span class="n">Wg</span>         <span class="o">*</span><span class="n">sync</span><span class="o">.</span><span class="n">WaitGroup</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></div></div> <p>We have a <code class="language-plaintext highlighter-rouge">sync.WaitGroup</code> in our image because each image is going to be processed concurrently, so I thought it is better to embed it in the Image type itself. You are welcome to implement them however you like.</p> <h2 id="brightness-func"><strong>Brightness Func</strong></h2> <p>The function to change the brightness of our image is going to be like the following:</p> <div class="language-go highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre></td><td class="rouge-code"><pre><span class="k">func</span> <span class="p">(</span><span class="n">i</span> <span class="n">Image</span><span class="p">)</span> <span class="n">brightness</span><span class="p">(</span><span class="n">brightnessDone</span> <span class="k">chan</span><span class="o">&lt;-</span> <span class="kt">bool</span><span class="p">,</span> <span class="n">contrastDone</span> <span class="k">chan</span><span class="o">&lt;-</span> <span class="kt">bool</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">i</span><span class="o">.</span><span class="n">Img</span> <span class="o">=</span> <span class="n">adjust</span><span class="o">.</span><span class="n">Brightness</span><span class="p">(</span><span class="n">i</span><span class="o">.</span><span class="n">Img</span><span class="p">,</span> <span class="m">0.25</span><span class="p">)</span>

    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"Brightness of "</span><span class="p">,</span> <span class="n">i</span><span class="o">.</span><span class="n">InputPath</span><span class="p">,</span> <span class="s">" changed by 0.25"</span><span class="p">)</span>
    <span class="n">brightnessDone</span> <span class="o">&lt;-</span> <span class="no">true</span>

    <span class="k">go</span> <span class="n">i</span><span class="o">.</span><span class="n">contrast</span><span class="p">(</span><span class="n">contrastDone</span><span class="p">)</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></div></div> <p>The function has two arguments:</p> <ul> <li><code class="language-plaintext highlighter-rouge">brightnessDone chan&lt;- bool</code></li> <li><code class="language-plaintext highlighter-rouge">contrastDone chan&lt;- bool</code></li> </ul> <p>We‚Äôve declared it as <code class="language-plaintext highlighter-rouge">chan&lt;- bool</code> because both of them are going to receive data into them.</p> <p>In line no.5, we send a <code class="language-plaintext highlighter-rouge">true</code> into the channel once we have adjusted the brightness of the image.</p> <p>And once we have adjusted the brightness, our next plan is to change the contrast.</p> <h2 id="contrast-func"><strong>Contrast Func</strong></h2> <p>The function to change the contrast of our image is going to be like the following:</p> <div class="language-go highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="rouge-code"><pre><span class="k">func</span> <span class="p">(</span><span class="n">i</span> <span class="n">Image</span><span class="p">)</span> <span class="n">contrast</span><span class="p">(</span><span class="n">contrastDone</span> <span class="k">chan</span><span class="o">&lt;-</span> <span class="kt">bool</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">i</span><span class="o">.</span><span class="n">Img</span> <span class="o">=</span> <span class="n">adjust</span><span class="o">.</span><span class="n">Contrast</span><span class="p">(</span><span class="n">i</span><span class="o">.</span><span class="n">Img</span><span class="p">,</span> <span class="m">0.25</span><span class="p">)</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"Contrast of "</span><span class="p">,</span> <span class="n">i</span><span class="o">.</span><span class="n">InputPath</span><span class="p">,</span> <span class="s">" changed by 0.25"</span><span class="p">)</span>
    <span class="n">contrastDone</span> <span class="o">&lt;-</span> <span class="no">true</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></div></div> <p>The contrast function has only one parameter <code class="language-plaintext highlighter-rouge">contrastDone chan&lt;- bool</code> because there is nothing more to be done on the image other than saving it. So we just send <code class="language-plaintext highlighter-rouge">true</code> into it once we‚Äôre done with it.</p> <p><span style="color:#FF0266"><b>Notice how we spawned off a goroutine in the brightness function to start the modification of contrast immediately.</b></span></p> <h2 id="save-func"><strong>Save Func</strong></h2> <p>We need to save an image only when we are sure that both brightness and contrast are adjusted. How do we keep track of them? Using the <code class="language-plaintext highlighter-rouge">brightnessDone</code> and <code class="language-plaintext highlighter-rouge">contrastDone</code> channels.</p> <div class="language-go highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
</pre></td><td class="rouge-code"><pre><span class="k">func</span> <span class="p">(</span><span class="n">i</span> <span class="n">Image</span><span class="p">)</span> <span class="n">Save</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">defer</span> <span class="n">i</span><span class="o">.</span><span class="n">Wg</span><span class="o">.</span><span class="n">Done</span><span class="p">()</span>
    <span class="n">brightnessDone</span><span class="p">,</span> <span class="n">contrastDone</span> <span class="o">:=</span> <span class="nb">make</span><span class="p">(</span><span class="k">chan</span> <span class="kt">bool</span><span class="p">),</span> <span class="nb">make</span><span class="p">(</span><span class="k">chan</span> <span class="kt">bool</span><span class="p">)</span>

    <span class="k">go</span> <span class="n">i</span><span class="o">.</span><span class="n">brightness</span><span class="p">(</span><span class="n">brightnessDone</span><span class="p">,</span> <span class="n">contrastDone</span><span class="p">)</span>

    <span class="o">&lt;-</span><span class="n">brightnessDone</span>
    <span class="o">&lt;-</span><span class="n">contrastDone</span>

    <span class="k">if</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">imgio</span><span class="o">.</span><span class="n">Save</span><span class="p">(</span><span class="n">i</span><span class="o">.</span><span class="n">OutputPath</span><span class="p">,</span> <span class="n">i</span><span class="o">.</span><span class="n">Img</span><span class="p">,</span> <span class="n">imgio</span><span class="o">.</span><span class="n">PNGEncoder</span><span class="p">());</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
        <span class="k">return</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></div></div> <p>In the <code class="language-plaintext highlighter-rouge">Save</code> function, we see that we create the two channels required to make sure both brightness and contrast of an image are completed. Here don‚Äôt explicity call the <code class="language-plaintext highlighter-rouge">contrast</code> function, because it will be called automatically once <code class="language-plaintext highlighter-rouge">brightness</code> finishes asynchronously.</p> <p>Why did we not create any waitgroups for the brightness and contrast functions, you may ask. There are two types of waiting for goroutines.</p> <ul> <li>Create a waitgroup and pass its address to goroutines and call <code class="language-plaintext highlighter-rouge">defer wg.Done()</code>.</li> <li>Pass data into a channel inside the goroutine and wait for data from the channel in the parent function.</li> </ul> <p>Since we‚Äôre learning about channels, we prefer the second method.</p> <h2 id="run"><strong>Run</strong></h2> <p>So our program on the whole becomes the following:</p> <div class="language-go highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
</pre></td><td class="rouge-code"><pre><span class="k">package</span> <span class="n">main</span>

<span class="k">import</span> <span class="p">(</span>
    <span class="s">"fmt"</span>
    <span class="s">"github.com/anthonynsimon/bild/adjust"</span>
    <span class="s">"github.com/anthonynsimon/bild/imgio"</span>
    <span class="s">"github.com/pkg/profile"</span>
    <span class="s">"image"</span>
    <span class="s">"sync"</span>
    <span class="s">"time"</span>
<span class="p">)</span>

<span class="k">func</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">var</span> <span class="n">wg</span> <span class="n">sync</span><span class="o">.</span><span class="n">WaitGroup</span>

    <span class="n">start</span> <span class="o">:=</span> <span class="n">time</span><span class="o">.</span><span class="n">Now</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">i</span> <span class="o">:=</span> <span class="m">1</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="m">3000</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span> <span class="p">{</span>
        <span class="n">filePath</span> <span class="o">:=</span> <span class="n">fmt</span><span class="o">.</span><span class="n">Sprintf</span><span class="p">(</span><span class="s">"/Users/g14a/Downloads/train/documents/%d.png"</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span>
        <span class="n">outputFilePath</span> <span class="o">:=</span> <span class="n">fmt</span><span class="o">.</span><span class="n">Sprintf</span><span class="p">(</span><span class="s">"/Users/g14a/Downloads/train/documents/output/%d.png"</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span>

        <span class="n">img</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">imgio</span><span class="o">.</span><span class="n">Open</span><span class="p">(</span><span class="n">filePath</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
            <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
        <span class="p">}</span>

        <span class="n">rImg</span> <span class="o">:=</span> <span class="n">Image</span><span class="p">{</span>
            <span class="n">InputPath</span><span class="o">:</span>  <span class="n">filePath</span><span class="p">,</span>
            <span class="n">OutputPath</span><span class="o">:</span> <span class="n">outputFilePath</span><span class="p">,</span>
            <span class="n">Img</span><span class="o">:</span>        <span class="n">img</span><span class="p">,</span>
            <span class="n">Wg</span><span class="o">:</span>         <span class="o">&amp;</span><span class="n">wg</span><span class="p">,</span>
        <span class="p">}</span>
        <span class="n">wg</span><span class="o">.</span><span class="n">Add</span><span class="p">(</span><span class="m">1</span><span class="p">)</span>
        <span class="k">go</span> <span class="n">rImg</span><span class="o">.</span><span class="n">Save</span><span class="p">()</span>
    <span class="p">}</span>
    <span class="n">wg</span><span class="o">.</span><span class="n">Wait</span><span class="p">()</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"Time elapsed"</span><span class="p">,</span> <span class="n">time</span><span class="o">.</span><span class="n">Since</span><span class="p">(</span><span class="n">start</span><span class="p">))</span>
<span class="p">}</span>

<span class="k">func</span> <span class="p">(</span><span class="n">i</span> <span class="n">Image</span><span class="p">)</span> <span class="n">Save</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">defer</span> <span class="n">i</span><span class="o">.</span><span class="n">Wg</span><span class="o">.</span><span class="n">Done</span><span class="p">()</span>
    <span class="n">brightnessDone</span><span class="p">,</span> <span class="n">contrastDone</span> <span class="o">:=</span> <span class="nb">make</span><span class="p">(</span><span class="k">chan</span> <span class="kt">bool</span><span class="p">),</span> <span class="nb">make</span><span class="p">(</span><span class="k">chan</span> <span class="kt">bool</span><span class="p">)</span>

    <span class="k">go</span> <span class="n">i</span><span class="o">.</span><span class="n">brightness</span><span class="p">(</span><span class="n">brightnessDone</span><span class="p">,</span> <span class="n">contrastDone</span><span class="p">)</span>

    <span class="o">&lt;-</span><span class="n">brightnessDone</span>
    <span class="o">&lt;-</span><span class="n">contrastDone</span>

    <span class="k">if</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">imgio</span><span class="o">.</span><span class="n">Save</span><span class="p">(</span><span class="n">i</span><span class="o">.</span><span class="n">OutputPath</span><span class="p">,</span> <span class="n">i</span><span class="o">.</span><span class="n">Img</span><span class="p">,</span> <span class="n">imgio</span><span class="o">.</span><span class="n">PNGEncoder</span><span class="p">());</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
        <span class="k">return</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="k">func</span> <span class="p">(</span><span class="n">i</span> <span class="n">Image</span><span class="p">)</span> <span class="n">brightness</span><span class="p">(</span><span class="n">brightnessDone</span> <span class="k">chan</span><span class="o">&lt;-</span> <span class="kt">bool</span><span class="p">,</span> <span class="n">contrastDone</span> <span class="k">chan</span><span class="o">&lt;-</span> <span class="kt">bool</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">i</span><span class="o">.</span><span class="n">Img</span> <span class="o">=</span> <span class="n">adjust</span><span class="o">.</span><span class="n">Brightness</span><span class="p">(</span><span class="n">i</span><span class="o">.</span><span class="n">Img</span><span class="p">,</span> <span class="m">0.25</span><span class="p">)</span>

    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"Brightness of "</span><span class="p">,</span> <span class="n">i</span><span class="o">.</span><span class="n">InputPath</span><span class="p">,</span> <span class="s">" changed by 0.25"</span><span class="p">)</span>
    <span class="n">brightnessDone</span> <span class="o">&lt;-</span> <span class="no">true</span>

    <span class="k">go</span> <span class="n">i</span><span class="o">.</span><span class="n">contrast</span><span class="p">(</span><span class="n">contrastDone</span><span class="p">)</span>
<span class="p">}</span>

<span class="k">func</span> <span class="p">(</span><span class="n">i</span> <span class="n">Image</span><span class="p">)</span> <span class="n">contrast</span><span class="p">(</span><span class="n">contrastDone</span> <span class="k">chan</span><span class="o">&lt;-</span> <span class="kt">bool</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">i</span><span class="o">.</span><span class="n">Img</span> <span class="o">=</span> <span class="n">adjust</span><span class="o">.</span><span class="n">Contrast</span><span class="p">(</span><span class="n">i</span><span class="o">.</span><span class="n">Img</span><span class="p">,</span> <span class="m">0.25</span><span class="p">)</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"Contrast of "</span><span class="p">,</span> <span class="n">i</span><span class="o">.</span><span class="n">InputPath</span><span class="p">,</span> <span class="s">" changed by 0.25"</span><span class="p">)</span>
    <span class="n">contrastDone</span> <span class="o">&lt;-</span> <span class="no">true</span>
<span class="p">}</span>

<span class="k">type</span> <span class="n">Image</span> <span class="k">struct</span> <span class="p">{</span>
    <span class="n">InputPath</span>  <span class="kt">string</span>
    <span class="n">OutputPath</span> <span class="kt">string</span>
    <span class="n">Img</span>        <span class="n">image</span><span class="o">.</span><span class="n">Image</span>
    <span class="n">Wg</span>         <span class="o">*</span><span class="n">sync</span><span class="o">.</span><span class="n">WaitGroup</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></div></div> <p>The flow of the program can be better understood by the following illustration:</p> <p> <img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="../../images/channels/goroutines.png" width="100%" alt="" /> </p> <p>When you run the above program, we see the following output:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
</pre></td><td class="rouge-code"><pre><span class="nv">$ </span><span class="o">&gt;</span> <span class="nb">time</span> ./img-proc
Brightness of  /Users/g14a/Downloads/train/documents/1.png  changed by 0.25
Contrast of  /Users/g14a/Downloads/train/documents/1.png  changed by 0.25
Brightness of  /Users/g14a/Downloads/train/documents/2.png  changed by 0.25
Contrast of  /Users/g14a/Downloads/train/documents/2.png  changed by 0.25
...
...
Brightness of  /Users/g14a/Downloads/train/documents/2998.png  changed by 0.25
Contrast of  /Users/g14a/Downloads/train/documents/2998.png  changed by 0.25
Brightness of  /Users/g14a/Downloads/train/documents/2999.png  changed by 0.25
Contrast of  /Users/g14a/Downloads/train/documents/2999.png  changed by 0.25
Time elapsed 3m34.121020904s
2021/04/15 18:27:23 profile: cpu profiling disabled, cpu.pprof
./img-proc  2235.90s user 25.88s system 1054% cpu 3:34.45 total
<span class="nv">$ </span><span class="o">&gt;</span>
</pre></td></tr></tbody></table></code></div></div> <p>The parallel version has taken around 3 and a half minutes long to process 3000 images.</p> <p>The serial version is pretty simple and let‚Äôs see how long this has taken:</p> <div class="language-go highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
</pre></td><td class="rouge-code"><pre><span class="k">func</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">start</span> <span class="o">:=</span> <span class="n">time</span><span class="o">.</span><span class="n">Now</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">i</span> <span class="o">:=</span> <span class="m">1</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="m">10000</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span> <span class="p">{</span>
    <span class="n">filePath</span> <span class="o">:=</span> <span class="n">fmt</span><span class="o">.</span><span class="n">Sprintf</span><span class="p">(</span><span class="s">"/Users/g14a/Downloads/train/documents/%d.png"</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span>
    <span class="n">outputFilePath</span> <span class="o">:=</span> <span class="n">fmt</span><span class="o">.</span><span class="n">Sprintf</span><span class="p">(</span><span class="s">"/Users/g14a/Downloads/train/documents/output/%d.png"</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span>

        <span class="n">img</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">imgio</span><span class="o">.</span><span class="n">Open</span><span class="p">(</span><span class="n">filePath</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
            <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
            <span class="k">return</span>
        <span class="p">}</span>
        <span class="n">img</span> <span class="o">=</span> <span class="n">adjust</span><span class="o">.</span><span class="n">Brightness</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="m">0.25</span><span class="p">)</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"Brightness of "</span><span class="p">,</span> <span class="n">filePath</span><span class="p">,</span> <span class="s">" changed by 0.25"</span><span class="p">)</span>
        <span class="n">img</span> <span class="o">=</span> <span class="n">adjust</span><span class="o">.</span><span class="n">Contrast</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="m">0.25</span><span class="p">)</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"Contrast of "</span><span class="p">,</span> <span class="n">filePath</span><span class="p">,</span> <span class="s">" changed by 0.25"</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">imgio</span><span class="o">.</span><span class="n">Save</span><span class="p">(</span><span class="n">outputFilePath</span><span class="p">,</span> <span class="n">img</span><span class="p">,</span> <span class="n">imgio</span><span class="o">.</span><span class="n">PNGEncoder</span><span class="p">());</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
            <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
            <span class="k">return</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"Time elapsed"</span><span class="p">,</span> <span class="n">time</span><span class="o">.</span><span class="n">Since</span><span class="p">(</span><span class="n">start</span><span class="p">))</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></div></div> <p>We see that the serial version takes around 19 and a half minutes to process the 3000 images.</p> <div class="language-bash highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
</pre></td><td class="rouge-code"><pre><span class="nv">$ </span><span class="o">&gt;</span> <span class="nb">time</span> ./img-proc
Brightness of  /Users/g14a/Downloads/train/documents/1.png  changed by 0.25
Contrast of  /Users/g14a/Downloads/train/documents/1.png  changed by 0.25
Brightness of  /Users/g14a/Downloads/train/documents/2.png  changed by 0.25
Contrast of  /Users/g14a/Downloads/train/documents/2.png  changed by 0.25
...
...
Brightness of  /Users/g14a/Downloads/train/documents/2998.png  changed by 0.25
Contrast of  /Users/g14a/Downloads/train/documents/2998.png  changed by 0.25
Brightness of  /Users/g14a/Downloads/train/documents/2999.png  changed by 0.25
Contrast of  /Users/g14a/Downloads/train/documents/2999.png  changed by 0.25
Time elapsed 19m39.104002641s
./img-proc  1447.34s user 45.19s system 126% cpu 19:39.62 total
<span class="nv">$ </span><span class="o">&gt;</span>
</pre></td></tr></tbody></table></code></div></div> <p>The results may vary on your machine.</p> <p>I‚Äôm using a MacBook Pro, 16 GB 2667 MHz DDR4, 2.6 GHz 6-Core Intel Core i7.</p> <p>Just by using basic channels and goroutines we‚Äôve managed to speed up the task by more than 5x.</p> <h2 id="conclusion"><strong>Conclusion</strong></h2> <p>Hope you enjoyed this exercise. In the next one we see if we can optimise this a little bit more and see what we can come up with.</p> <p>Check it out at <a href="https://g14a.github.io/posts/using-Go-Channels-p5/">Part-4 Image Processing with channels - 2</a></p> <p>Please reach out to me via email(or any social media linked down below) if you think I haven‚Äôt covered something which you consider important.</p> <p>Thank you üòÅ</p> </div> <div class="post-tail-wrapper text-muted"> <!-- categories --> <div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/tutorials/'>tutorials</a> </div> <!-- tags --> <div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/golang/" class="post-tag no-text-decoration" >golang</a> <a href="/tags/channels/" class="post-tag no-text-decoration" >channels</a> <a href="/tags/concurrency/" class="post-tag no-text-decoration" >concurrency</a> <a href="/tags/exercise/" class="post-tag no-text-decoration" >exercise</a> </div> <div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"> <div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a> by the author. </div> <!-- Post sharing snippet v2.1 https://github.com/cotes2020/jekyll-theme-chirpy ¬© 2019 Cotes Chung Published under the MIT License --> <div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Using Go Channels - Part 4 - Image Processing with Channels - g14a&url=https://g14a.github.io/posts/using-Go-Channels-p4/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=Using Go Channels - Part 4 - Image Processing with Channels - g14a&u=https://g14a.github.io/posts/using-Go-Channels-p4/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://telegram.me/share?text=Using Go Channels - Part 4 - Image Processing with Channels - g14a&url=https://g14a.github.io/posts/using-Go-Channels-p4/" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i class="fa-fw fas fa-link small" onclick="copyLink()" data-toggle="tooltip" data-placement="top" title="Copy link"></i> </span> </div> </div><!-- .post-tail-bottom --> </div><!-- div.post-tail --> </div> <!-- .post --> </div> <!-- #post-wrapper --> <!-- The Pannel on right side (Desktop views) v2.0 https://github.com/cotes2020/jekyll-theme-chirpy ¬© 2017-2019 Cotes Chung MIT License --> <div id="panel-wrapper" class="col-xl-3 pl-2 text-muted topbar-down"> <div class="access"> <div id="access-lastmod" class="post"> <span>Recent Update</span> <ul class="post-content pl-0 pb-1 ml-1 mt-2"> <li><a href="/posts/interfaces/">How I learnt Go Interfaces</a></li> <li><a href="/posts/using-Go-Channels-p1/">Using Go Channels - Part 1 - Introduction to Channels</a></li> <li><a href="/posts/using-Go-Channels-p3/">Using Go Channels - Part 3 - Read/Write Channels & Select</a></li> <li><a href="/posts/using-Go-Channels-p4/">Using Go Channels - Part 4 - Image Processing with Channels</a></li> <li><a href="/posts/using-Go-Channels-p5/">Using Go Channels - Part 4 - Image Processing with Channels - Part 2</a></li> </ul> </div> <!-- #access-lastmod --> <div id="access-tags"> <span>Trending Tags</span> <div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/golang/">golang</a> <a class="post-tag" href="/tags/channels/">channels</a> <a class="post-tag" href="/tags/concurrency/">concurrency</a> <a class="post-tag" href="/tags/exercise/">exercise</a> <a class="post-tag" href="/tags/api/">api</a> <a class="post-tag" href="/tags/cache/">cache</a> <a class="post-tag" href="/tags/cli/">cli</a> <a class="post-tag" href="/tags/cobra/">cobra</a> <a class="post-tag" href="/tags/databases/">databases</a> <a class="post-tag" href="/tags/heroku/">heroku</a> </div> </div> </div> <!-- .access --> <div id="toc-wrapper" class="pl-0 pr-4 mb-5"> <span class="pl-3 pt-2 mb-2">Contents</span> <nav id="toc" data-toggle="toc"></nav> </div> </div> <!-- #panel-wrapper --> </div> <!-- .row --> <div class="row"> <div class="col-12 col-lg-11 col-xl-8"> <div id="post-extend-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"> <!-- Recommend the other 3 posts according to the tags and categories of the current post, if the number is not enough, use the other latest posts to supplement. v2.0 https://github.com/cotes2020/jekyll-theme-chirpy ¬© 2019 Cotes Chung Published under the MIT License --> <!-- The total size of related posts --> <!-- An random integer that bigger than 0 --> <!-- Equals to TAG_SCORE / {max_categories_hierarchy} --> <!-- Fill with the other newlest posts --> <div id="related-posts" class="mt-5 mb-2 mb-sm-4"> <h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3> <div class="card-deck mb-4"> <div class="card"> <a href="/posts/using-Go-Channels-p5/"> <div class="card-body"> <!-- Date format snippet v2.4.1 https://github.com/cotes2020/jekyll-theme-chirpy ¬© 2020 Cotes Chung MIT License --> <span class="timeago small" > Apr 16, 2021 <i class="unloaded">2021-04-16T14:30:00+05:30</i> </span> <h3 class="pt-0 mt-1 mb-3" data-toc-skip>Using Go Channels - Part 4 - Image Processing with Channels - Part 2</h3> <div class="text-muted small"> <p> A Tiny Recap In the earlier section Part - 4, we have seen the serial and parallel versions of our image processing program. Now let us see if we can make our parallel version even better. ... </p> </div> </div> </a> </div> <div class="card"> <a href="/posts/channels-and-deadlocks/"> <div class="card-body"> <!-- Date format snippet v2.4.1 https://github.com/cotes2020/jekyll-theme-chirpy ¬© 2020 Cotes Chung MIT License --> <span class="timeago small" > Nov 27, 2021 <i class="unloaded">2021-11-27T14:30:00+05:30</i> </span> <h3 class="pt-0 mt-1 mb-3" data-toc-skip>Channels and Deadlocks in Go with a File crawler</h3> <div class="text-muted small"> <p> Welcome back! We‚Äôve seen in the earlier sections that channels can be used to improve and control concurrency in Golang. But let‚Äôs look at it again with a fresh mind. Let‚Äôs unlearn things a... </p> </div> </div> </a> </div> <div class="card"> <a href="/posts/using-Go-Channels-p1/"> <div class="card-body"> <!-- Date format snippet v2.4.1 https://github.com/cotes2020/jekyll-theme-chirpy ¬© 2020 Cotes Chung MIT License --> <span class="timeago small" > Apr 6, 2021 <i class="unloaded">2021-04-06T13:23:00+05:30</i> </span> <h3 class="pt-0 mt-1 mb-3" data-toc-skip>Using Go Channels - Part 1 - Introduction to Channels</h3> <div class="text-muted small"> <p> Introduction We know that Goroutines are independently executing user space threads. Imagine an office workspace where ten employees are working towards a customer satisfying goal. These ten empl... </p> </div> </div> </a> </div> </div> <!-- .card-deck --> </div> <!-- #related-posts --> <!-- Navigation buttons at the bottom of the post. v2.1 https://github.com/cotes2020/jekyll-theme-chirpy ¬© 2020 Cotes Chung MIT License --> <div class="post-navigation d-flex justify-content-between"> <a href="/posts/using-Go-Channels-p3/" class="btn btn-outline-primary"> <p>Using Go Channels - Part 3 - Read/Write Channels & Select</p> </a> <a href="/posts/using-Go-Channels-p5/" class="btn btn-outline-primary"> <p>Using Go Channels - Part 4 - Image Processing with Channels - Part 2</p> </a> </div> </div> <!-- #post-extend-wrapper --> </div> <!-- .col-* --> </div> <!-- .row --> <!-- image lazy load: https://github.com/ApoorvSaxena/lozad.js --> <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lozad/dist/lozad.min.js"></script> <script type="text/javascript"> const imgs = document.querySelectorAll('#post-wrapper img'); const observer = lozad(imgs); observer.observe(); </script> <!-- The Footer v2.0 https://github.com/cotes2020/jekyll-theme-chirpy ¬© 2017-2019 Cotes Chung MIT License --> <footer class="d-flex w-100 justify-content-center"> <div class="d-flex justify-content-between align-items-center"> <div class="footer-left"> <p class="mb-0"> ¬© 2024 <a href="https://twitter.com/username">g14a</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span> </p> </div> <div class="footer-right"> <p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy/" target="_blank" rel="noopener">Chirpy</a> theme. </p> </div> </div> <!-- div.d-flex --> </footer> </div> <!-- The Search results v2.0 https://github.com/cotes2020/jekyll-theme-chirpy ¬© 2017-2019 Cotes Chung MIT License --> <div id="search-result-wrapper" class="d-flex justify-content-center unloaded"> <div class="col-12 col-xl-11 post-content"> <div id="search-hints"> <h4 class="text-muted mb-4">Trending Tags</h4> <a class="post-tag" href="/tags/golang/">golang</a> <a class="post-tag" href="/tags/channels/">channels</a> <a class="post-tag" href="/tags/concurrency/">concurrency</a> <a class="post-tag" href="/tags/exercise/">exercise</a> <a class="post-tag" href="/tags/api/">api</a> <a class="post-tag" href="/tags/cache/">cache</a> <a class="post-tag" href="/tags/cli/">cli</a> <a class="post-tag" href="/tags/cobra/">cobra</a> <a class="post-tag" href="/tags/databases/">databases</a> <a class="post-tag" href="/tags/heroku/">heroku</a> </div> <div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div> </div> </div> </div> <!-- #main-wrapper --> <div id="mask"></div> <a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <!-- Jekyll Simple Search loader v2.0 https://github.com/cotes2020/jekyll-theme-chirpy ¬© 2017-2019 Cotes Chung MIT License --> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.7.3/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="https://g14a.github.io{url}">{title}</a> <div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> <div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>{categories}</div> <div><i class="fa fa-tag fa-fw"></i>{tags}</div> </div> <p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>' }); </script> </body> </html>
